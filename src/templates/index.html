<meta property="og:url"                content="http://www.nytimes.com/2015/02/19/arts/international/when-great-minds-dont-think-alike.html" />
<meta property="og:type"               content="article" />
<meta property="og:title"              content="å°ä¸çœ‹æˆ¿ç¥å™¨ [v1.03]" />
<meta property="og:description"        content="ä½ åšç ”ç©¶éƒ½è¦çˆ¬æ–‡ç»äº†ï¼Œé‚£ç‚ºä»€éº¼è²·æˆ¿ä¸ç”¨ï¼Ÿåœ¨ç·šåˆ†æåˆç†æˆ¿åƒ¹å€é–“ã€‚" />
<meta property="og:image"              content="https://github.com/aaaddress1/buyHouseAnalyzer/blob/main/1645783587776.png?raw=true" />

<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <title>å°ä¸çœ‹æˆ¿ç¥å™¨</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
  </head>
  <body>
    <!-- Header -->
    <header class=" top-0 z-40 w-full backdrop-blur flex-none transition-colors duration-500 lg:z-50 lg:border-b lg:border-slate-900/10 dark:border-slate-50/[0.06] bg-white supports-backdrop-blur:bg-white/95 dark:bg-yellow-300">
      <div class="max-w-8xl mx-auto">
        <div class="py-4 border-b border-slate-900/10 lg:px-8 lg:border-0 dark:border-slate-300/10 mx-4 lg:mx-0">
          <div class="relative flex items-center">
            <h1 class="font-bold">å°ä¸çœ‹æˆ¿ç¥å™¨ [v1.03] - ä¸­å¤å±‹è¡Œæƒ…åˆ†æ</h1>
            <span class="ml-3 text-xs leading-5 font-medium text-sky-600 dark:text-yellow-600 bg-sky-400/10 rounded-full py-1 px-3 hidden xl:flex items-center hover:bg-sky-400/20">ä½ åšç ”ç©¶éƒ½è¦çˆ¬æ–‡ç»äº†ï¼Œé‚£ç‚ºä»€éº¼è²·æˆ¿ä¸ç”¨ï¼Ÿ</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Application -->
    <div id="app" class="max-w-8xl mt-8 mx-auto px-4 sm:px-6 md:px-8">
      <!-- Search Form -->
      <section>
        <!-- Input -->
        <div class="md:flex md:items-center mb-6">
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="inline-full-name">
              èª¿é–±å¹´ä»½
            </label>
          </div>
          <div class="md:w-2/3">
            <input v-model="yearBegin" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-1/3 py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" id="inline-full-name" type="text">
            åˆ°
            <input v-model="yearEnd" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-1/3 py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" id="inline-full-name" type="text">
          </div>
        </div>
        <!-- Input -->
        <div class="md:flex md:items-center mb-6">
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="inline-full-name">
              ä½ç½®
            </label>
          </div>
          <div class="md:w-2/3">
            <select v-model="city" name="city" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded mr-4 w-1/5 py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500">
              <option value="è‡ºåŒ—å¸‚">è‡ºåŒ—å¸‚</option>
              <option value="è‡ºä¸­å¸‚">è‡ºä¸­å¸‚</option>
              <option value="åŸºéš†å¸‚">åŸºéš†å¸‚</option>
              <option value="è‡ºå—å¸‚">è‡ºå—å¸‚</option>
              <option value="é«˜é›„å¸‚">é«˜é›„å¸‚</option>
              <option value="æ–°åŒ—å¸‚">æ–°åŒ—å¸‚</option>
              <option value="å®œè˜­ç¸£">å®œè˜­ç¸£</option>
              <option value="æ¡ƒåœ’å¸‚">æ¡ƒåœ’å¸‚</option>
              <option value="å˜‰ç¾©å¸‚">å˜‰ç¾©å¸‚</option>
              <option value="æ–°ç«¹ç¸£">æ–°ç«¹ç¸£</option>
              <option value="è‹—æ —ç¸£">è‹—æ —ç¸£</option>
              <option value="å—æŠ•ç¸£">å—æŠ•ç¸£</option>
              <option value="å½°åŒ–ç¸£">å½°åŒ–ç¸£</option>
              <option value="æ–°ç«¹å¸‚">æ–°ç«¹å¸‚</option>
              <option value="é›²æ—ç¸£">é›²æ—ç¸£</option>
              <option value="å˜‰ç¾©ç¸£">å˜‰ç¾©ç¸£</option>
              <option value="å±æ±ç¸£">å±æ±ç¸£</option>
              <option value="èŠ±è“®ç¸£">èŠ±è“®ç¸£</option>
              <option value="è‡ºæ±ç¸£">è‡ºæ±ç¸£</option>
              <option value="é‡‘é–€ç¸£">é‡‘é–€ç¸£</option>
              <option value="é¦¬å…¬å¸‚">é¦¬å…¬å¸‚</option>
            </select>
            <input type="text" v-model="district" name="district" placeholder="è¡Œæ”¿å€" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded mr-4 w-1/5 py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" />
            <input type="text" v-model="addr" name="house_local" placeholder="åœ°å€è¡—é“åœ°å€ï¼ˆä¸åŒ…å«å··å¼„æ¨“å±¤ï¼‰" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-1/3 py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" />
          </div>
        </div>
        <!-- Input -->
        <div class="md:flex md:items-center mb-6">
          <div class="md:w-1/3"></div>
          <div class="md:w-2/3">
            <input type="number" v-model="landSize" step="0.01" name="landsize_Ibuy" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded mr-4 w-1/5 py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" placeholder="ä½ æƒ³è²·çš„ç‰©ä»¶åªæ•¸" />
            <input type="number" v-model="floor" name="which_floor" placeholder="æ¨“å±¤" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded mr-4 w-1/5 py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" />
            <input type="number" v-model="houseYear" name="house_year" placeholder="å±‹é½¡" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded mr-4 w-1/5 py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" />
          </div>
        </div>
        <!-- Notice -->
        <div class="md:flex md:items-center mb-6">
          <div class="md:w-1/3">
          </div>
          <div class="md:w-2/3">
            <div class="form-check form-switch">
              
              <input class="form-check-input" type="checkbox"  v-model="onlyHaveCarResult">
              <label class="form-check-label text-gray-500 text-sm" for="flexSwitchCheckDefault">åƒ…åˆ†æå…·æœ‰è»Šä½çš„æˆ¿å±‹çµæœ</label>
            </div>
            <p class="text-gray-500 text-sm">è‹¥ä¸é ˆç¯©é¸è©²é …æ¢ä»¶ï¼Œå°‡å…¶æ¬„ä½ç•™ç©ºå³å¯ã€‚</p>
          </div>
        </div>
        <!-- Submit -->
        <div class="md:flex md:items-center mb-6">
          <div class="md:w-1/3"></div>
          <div class="md:w-2/3">
            <p class="text-red-500 text-sm" id="errorHint"></p>
            <button type="button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" @click="onSearch">è½è©±ï¼è®“å°ä¸çœ‹çœ‹ï¼</button>
          </div>
        </div>
      </section>
      <!-- Result Section -->
      <section class="leading-7">
        <header>
          <h1 class="text-lg font-bold">å°ä¸ç·šä¸Šé»è©•</h1>
        </header>
        <div>
          {% if content|length > 0 %}
            <p>å°ä¸é©šè¨çš„ç™¼ç¾ï¼ï¼ï¼</p>
            <p>å¯¦åƒ¹ç™»éŒ„æˆäº¤æœ€ä½æ¨“å±¤ç‚º {{ analyzeResult['lowest_floorInfo'][0]}}æ¨“ï¼Œå…¶å¹³å‡æ¯åª {{ '%.2f' | format(analyzeResult['lowest_floorInfo'][1]|float) }} è¬å…ƒ</p>
            <p>å¯¦åƒ¹ç™»éŒ„æˆäº¤æœ€é«˜æ¨“å±¤ç‚º {{ analyzeResult['highest_floorInfo'][0] }}æ¨“ï¼Œå…¶å¹³å‡æ¯åª {{ '%.2f' | format(analyzeResult['highest_floorInfo'][1]|float) }} è¬å…ƒ</p>
            <p>æ„å‘³è‘—æ¯å¢åŠ ä¸€å±¤æ¨“ï¼Œæ¯åªå–®åƒ¹ä¾¿é ˆå¢åŠ  {{ analyzeResult['perFloor_addMoney'] }} å…ƒæ–°å°å¹£ï¼</p>

            {% if dbInitVal['landsize_Ibuy'] and dbInitVal['which_floor'] %}
              <p>å‡è¨­æ‚¨ç¾åœ¨æƒ³è²·ä½æ–¼ {{dbInitVal['which_floor']}} æ¨“ {{dbInitVal['landsize_Ibuy']}} åªçš„ä¸­å¤å±‹...</p>
              <p>
                é‚£éº¼å°ä¸æ¨æ¸¬æ­¤æ¢ä»¶ä¹‹æˆ¿å±‹åº•åƒ¹ç‚ºï¼š {{dbInitVal['landsize_Ibuy']}}åª
                * ({{'%.2f'|format(analyzeResult['lowest_floorInfo'][1]|float)}}è¬ + {{analyzeResult['perFloor_addMoney']}}å…ƒ * {{ dbInitVal['which_floor'] - analyzeResult['lowest_floorInfo'][0] }}å€‹æ¨“å±¤å·® )
                = {{ '%.2f' | format(dbInitVal['landsize_Ibuy'] * (analyzeResult['lowest_floorInfo'][1]*10000 + analyzeResult['perFloor_addMoney'] * (dbInitVal['which_floor'] - analyzeResult['lowest_floorInfo'][0] ))/10000 | float)}} è¬å…ƒç¸½åƒ¹å”·ï¼
              </p>
              <p>æ‚¨æ‰€æœç´¢çš„æˆ¿å±‹æ¢ä»¶ä¾†èªªï¼Œå¹³å‡å–®åƒ¹ç‚ºæ¯åª {{ analyzeResult['avg_landCost'] }} è¬å…ƒï¼Œå› æ­¤ {{dbInitVal['landsize_Ibuy']}}åª çš„æˆ¿å­å‡åƒ¹æ‡‰è©²åœ¨ {{ '%.2f'|format(analyzeResult['avg_landCost'] * dbInitVal['landsize_Ibuy']|float) }}è¬ç¸½åƒ¹ã€‚</p>
              <p>éŠ€è¡Œä¼°å€¼æœ€é«˜ç¸½åƒ¹æ‡‰ç‚º {{ '%.2f'|format(analyzeResult['avg_landCost'] * dbInitVal['landsize_Ibuy'] * 1.15|float) }} è¬å…ƒã€‚</p>
              <!-- TODO: Extra Breaker -->
              <p>å°ä¸é‚„ç™¼ç¾äº†æœ‰å€‹ä½åœ¨ {{ analyzeResult['richest_buyerInfo'][0] }} æ¨“çš„ç›¤å­è²·åˆ°æœ€é«˜åƒ¹æ¯åª {{ '%.2f'| format(analyzeResult['richest_buyerInfo'][1]|float) }} è¬å…ƒ</p>

              <p>
                å› æ­¤è³£å®¶å¿ƒåº•çš„åƒ¹æ ¼ï¼ˆå³å¯¦åƒ¹ç™»éŒ„æœ€é«˜åƒ¹ï¼‰æ‡‰è©²è‡³å°‘è¦ {{dbInitVal['landsize_Ibuy']}}åª * {{ '%.2f'| format(analyzeResult['richest_buyerInfo'][1]|float) }}
                = ç¸½åƒ¹ {{ '%.2f'| format(analyzeResult['richest_buyerInfo'][1]*dbInitVal['landsize_Ibuy']|float) }} è¬å…ƒæ‰é¡˜æ„è³£å”·QQ
              </p>
            {% endif %}
            <div class="text-sm text-gray-500">
              <p>è¨»1ï¼šèƒ½æˆäº¤çš„æ‰æ˜¯å¥½åƒ¹æ ¼ã€æœ¬åˆ†æåƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›è­°åƒ¹æˆäº¤åƒ¹æ ¼å¯èƒ½æœƒæœ‰æ‰€å‡ºå…¥ã€‚</p>
              <p>è¨»2ï¼šæœ¬åˆ†æè³‡æ–™ä¾†æºå…§æ”¿éƒ¨å¯¦åƒ¹ç™»éŒ„ï¼Œä¸¦æœªåƒå¯¦åƒ¹ç™»éŒ„2.0ä¸€æ¨£å°‡æ¥µç«¯è²·è³£åƒ¹éš±è—ã€è€Œæ˜¯å…¨éƒ¨é¡¯ç¤ºã€‚</p>
            </div>
          {% else %}
            <p>å¿«è¼¸å…¥ä½ æƒ³è³¼è²·ã„‰æˆ¿å±‹æ¢ä»¶ä¾†åˆ†æè­°åƒ¹ç©ºé–“ã„… :)</p>
            <p> æˆ¿å±‹ç¯©é¸æ¢ä»¶è¨­å®šå¤ªåš´è‹›ã„‰è©±å°ä¸å¯èƒ½æœƒæœå°‹ä¸åˆ°çµæœå”· QQ </p>
          {% endif %}
        </div>
      </section>
      {% if content|length > 0 %}
        <section class="mt-8 leading-7">
          <header>
            <h1 class="text-lg font-bold">åªæ•¸èˆ‡å…¬è¨­ç¶œåˆåˆ†æ</h1>
          </header>
          <div class="flex items-center">
   
            <canvas id="priceChart" width="100%" height="400"></canvas>

          </div>
          

          <div class="flex items-center">

            <canvas id="publicChart" width="100%" height="400"></canvas>
  
          </div>
        </section>

        <section class="mt-8 leading-7">
          <header>
            <h1 class="text-lg font-bold">å¯¦åƒ¹ç™»éŒ„åˆ†æ</h1>
          </header>
          <div>
            {% for which_floor in content|sort %}
            <div class="panel-group" id="floor{{which_floor}}panel">
              <div class="panel panel-default">
                <div class="mb-2 py-2">
                  <a @click.prevent="viewFloor('collapse{{which_floor}}')" href="#collapse{{which_floor}}" class="text-blue-500 hover:text-blue-800">
                    æ¨“å±¤ #{{which_floor}} - å¹³å‡æ¯åª {{'%.2f'|format(content[which_floor]['perland_avgCost']|float)}} è¬å…ƒ
                  </a>
                  <div id="collapse{{which_floor}}" class="hidden floorTable">
                    <table class="border-collapse table-auto w-full text-sm">
                      <thead>
                        <tr>{% for l in labels %}<th class="border-b font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-700 text-left">{{l}}</th>{% endfor %}</tr>
                      </thead>
                      <tbody class="bg-white dark:bg-yellow-100">
                        {% for curr_row in content[which_floor]['currFloorDB'] %}
                        <tr>
                          {% for each_col in curr_row %}<td class="border-b  p-4 pl-8 text-slate-500 dark:text-slate-700">{{ each_col }}</td>{% endfor %}
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </section>
      {% endif %}
    </div>

    <!-- Footer -->
    <footer class="max-w-8xl mx-auto px-4 sm:px-6 md:px-8 text-sm leading-6 mt-16">
      <div class="pt-10 pb-28 border-t border-slate-200 sm:flex justify-between text-slate-500 dark:border-slate-200/5">
        <div>
          <h2 class="font-bold mb-4">é—œæ–¼æ­¤å°ˆæ¡ˆ</h2>
          <div class="card-body">
            <p class="mb-2">æ­¤å°ˆæ¡ˆç‚ºå…¬ç›Šæ€§è³ªå…è²»åœ¨ç·šä¸­å¤å±‹æˆ¿åƒ¹åˆ†æå·¥å…· :)</p>
            <p class="mb-2">ç¨‹å¼ç¢¼å®Œå…¨é€æ˜ä¸¦é–‹æºæ–¼ <a class="text-blue-500" href="http://github.com/aaaddress1/buyHouseAnalyzer">aaaddress1/buyHouseAnalyzer</a></p>
            <p class="mb-2">è‹¥ä½¿ç”¨ä¸Šæœ‰ä»»ä½•è¨ˆç®—ç–æ¼æˆ–è€…åŠŸèƒ½å»ºè­°éƒ½æ­¡è¿ ç™¼PR æ Issue æˆ–ä¾†ä¿¡ aaaddress1@chroot.org</p>
            <p class="mb-2">æ­¡è¿å„ä½å¤§ä½¬æ‰“è³å°é¡æ”¯æŒä¼ºæœå™¨ç§Ÿè³ƒè²»ç”¨ï¼Œç›®å‰åªæ•¢é–‹ Digital Ocean ä½è¦ä¸»æ©Ÿ QQ</p>
          </div>
        </div>
        <div>
          <a href="https://www.buymeacoffee.com/aaaddress1"><img src="https://img.buymeacoffee.com/button-api/?text=æ‰“è³æ”¯æŒğŸ™&emoji=&slug=aaaddress1&button_colour=FFDD00&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=ffffff" /></a>
        </div>
      </div>
    </footer>

    <script>
      haveSubmittedRequest = false;

      const app = Vue.createApp({
        setup() {
          const yearBegin = Vue.ref({{ dbInitVal['year_begin'] or 2018 }})
          const yearEnd = Vue.ref({{ dbInitVal['year_end'] or 2022 }})
          const city = Vue.ref('{{ dbInitVal['city'] or è‡ºåŒ—å¸‚ }}')
          const district = Vue.ref('{{ dbInitVal['district'] or '' }}')
          const addr = Vue.ref('{{ dbInitVal['houseAddr'] or '' }}')
          const landSize = Vue.ref({{ dbInitVal['landsize_Ibuy'] or '' }})
          const floor = Vue.ref({{ dbInitVal['which_floor'] or '' }})
          const houseYear = Vue.ref({{ dbInitVal['house_year'] or '' }})
          const onlyHaveCarResult = Vue.ref({{ dbInitVal['onlyHaveCarResult'] or '' }})
          return {
            yearBegin,
            yearEnd,
            city,
            district,
            addr,
            landSize,
            floor,
            houseYear,
            onlyHaveCarResult,
            onSearch: () => {

              if ((district.value.length < 1) && (addr.value.length < 1))
                document.getElementById('errorHint').innerHTML = "ç¯©é¸æ¢ä»¶å¿…é ˆè‡³å°‘å¡«å¯«ã€Œå€ã€æˆ–è€…ã€Œè¡—é“è·¯åã€å…©è€…å…¶ä¸€ï¼ˆæˆ–åŒæ™‚å¡«å¯«ï¼‰";
              else
                if (!haveSubmittedRequest) {
                  location.replace(`/?city=${city.value}&district=${district.value || ''}&houseAddr=${addr.value || ''}&year_begin=${yearBegin.value}&year_end=${yearEnd.value}&house_year=${houseYear.value || ''}&which_floor=${floor.value || ''}&landsize_Ibuy=${landSize.value || ''}&onlyHaveCarResult=${onlyHaveCarResult.value||''}`);
                  haveSubmittedRequest = true;
                }
                
            },
            viewFloor: (floorId) => {
              document.querySelectorAll('.floorTable').forEach($el => $el.classList.add('hidden'))
              document.getElementById(floorId).classList.toggle('hidden')
            }
          }
        }
      })

      app.mount('#app')
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const $priceChart = document.getElementById('priceChart')
        const $publicChart = document.getElementById('publicChart')

        const chartContent = JSON.parse(`{{content|tojson}}`);
        const floorLabels = []
        const avgLandCost = []
        const avgSharedPercent = []

        {% for which_floor in content|sort %}
        floorLabels.push("{{which_floor}} æ¨“");
        avgLandCost.push({{ content[which_floor]['perland_avgCost'] }});
        avgSharedPercent.push({{ content[which_floor]['currFloor_avgSharedPercent'] }});
        {% endfor %}

        if($priceChart) {
          const priceCtx = $priceChart.getContext('2d')
          const priceChart = new Chart(priceCtx, {
            type: 'line',
            data: {
              labels: floorLabels,
              datasets: [{
                label: 'æŒ‰æ¨“å±¤æ¯åªå–®åƒ¹åˆ†ä½ˆï¼ˆå–®ä½ï¼šè¬ï¼‰',
                data: avgLandCost
              }]
            }, options: {
              scales: {
                yAxes: [{
                  ticks: {
                    beginAtZero: true,
                    min: 0,
                    stepSize: 5,
                  }
                }]
              }
            }
          })
        }

        if($publicChart) {
          const publicCtx = $publicChart.getContext('2d')
          const publicChart = new Chart(publicCtx, {
            type: 'line',
            data: {
              labels: floorLabels,
              datasets: [{
                label: 'æŒ‰æ¨“å±¤å…¬è¨­æ¯”åˆ†ä½ˆï¼ˆå–®ä½ï¼šï¼…ï¼‰',
                data: avgSharedPercent
              }]
            },      options: {
              scales: {
                yAxes: [{
                  ticks: {
                    beginAtZero: true,
                    min: 0,
                    max: 100,
                    stepSize: 5,
                  }
                }]
              }
            }
          });
        }
      })
    </script>
  </body>
</html>
